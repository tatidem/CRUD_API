# Node.js User Management API

This project provides a simple CRUD API (Create, Read, Update, Delete) for managing user data, built using Node.js. It was developed as part of the [RS School](https://rs.school/) [NodeJS 2025 course (CRUD API task)](https://github.com/AlreadyBored/nodejs-assignments/blob/main/assignments/crud-api/assignment.md).

## Project Goal

The primary objective of this project was to create a functional API that allows users to perform basic CRUD operations on a user database.  This includes:

*   **Creating** new user records.
*   **Reading** user records (both individual and lists).
*   **Updating** existing user records.
*   **Deleting** user records.

## Key Technologies

This application is built with the following technologies and architectural considerations:

*   **Runtime Environment:** Requires Node.js version 22.14.0 or later.
*   **Core Dependencies:** Uses `dotenv` for environment variable management.
*   **Asynchronous Operations:**  Employs asynchronous programming patterns to ensure efficient handling of requests and improved server responsiveness.
*   **Scalability:** Designed to leverage horizontal scaling capabilities, distributing workload across multiple CPU cores for optimal performance.
*   **Clustering:** Utilizes Node.js's built-in Cluster API to manage worker processes. The primary process acts as a load balancer, distributing incoming requests to available worker processes in a round-robin fashion.  This maximizes resource utilization and improves concurrency handling.

## API Details

The API exposes the following endpoints to manage user resources:

### Get All Users

*   **Method:** `GET`
*   **Endpoint:** `/api/users`
*   **Description:** Retrieves a list of all users in the system.
*   **Response:** A JSON array of user objects.  For example: `[{user}, {user}, ...]`.
*   **Success Status Code:** `200 OK`

### Get User by ID

*   **Method:** `GET`
*   **Endpoint:** `/api/users/{userId}`
*   **Description:** Retrieves a specific user based on their UUID.  Replace `{userId}` with the actual UUID.
*   **Response:** A JSON object representing the requested user.
*   **Success Status Code:** `200 OK`
*   **Error Status Codes:**
    *   `400 Bad Request`:  The provided `userId` is not a valid UUID.
    *   `404 Not Found`: No user exists with the specified `userId`.

### Create New User

*   **Method:** `POST`
*   **Endpoint:** `/api/users`
*   **Description:** Creates a new user record in the system.  The request body should contain the user data in JSON format.
*   **Response:** A JSON object representing the newly created user.
*   **Success Status Code:** `201 Created`
*   **Error Status Codes:**
    *   `400 Bad Request`:  The request body is invalid or missing required fields.

### Update Existing User

*   **Method:** `PUT`
*   **Endpoint:** `/api/users/{userId}`
*   **Description:** Updates an existing user record.  Replace `{userId}` with the UUID of the user to update. The request body should contain the updated user data in JSON format.
*   **Response:** A JSON object representing the updated user.
*   **Success Status Code:** `200 OK`
*   **Error Status Codes:**
    *   `400 Bad Request`:  The provided `userId` is not a valid UUID, or the request body is invalid.
    *   `404 Not Found`: No user exists with the specified `userId`.

### Delete User

*   **Method:** `DELETE`
*   **Endpoint:** `/api/users/{userId}`
*   **Description:** Deletes a user record from the system.  Replace `{userId}` with the UUID of the user to delete.
*   **Response:**  No content is returned on successful deletion.
*   **Success Status Code:** `204 No Content`
*   **Error Status Codes:**
    *   `400 Bad Request`:  The provided `userId` is not a valid UUID.
    *   `404 Not Found`: No user exists with the specified `userId`.

### General Error Handling

*   `500 Internal Server Error`: Returned in case of unexpected server errors.

## API Data Specifications

### Data Format

*   The API communicates using JSON (JavaScript Object Notation).
*   **User Object Structure:**
    *   `id`: Unique identifier (string, UUID) - automatically generated by the server.
    *   `username`: User's name (string, **required**).
    *   `age`: User's age (number, **required**).
    *   `hobbies`: User's hobbies (array of strings or empty array, **required**).
*   Requests requiring data (e.g., `POST` and `PUT`) must set the `Content-Type` header to `application/json`.

### Response Structure

*   Successful API calls return a status code of `200 OK`, `201 Created`, or `204 No Content` along with a JSON response body (where applicable).
*   Error responses include a status code indicating the error type (e.g., `400 Bad Request`, `404 Not Found`, `500 Internal Server Error`) and a JSON body providing a descriptive error message.

### Error Handling

*   The API implements robust error handling to gracefully manage invalid requests and provide informative error messages to the client.

## Getting Started

Follow these steps to set up and run the application:

1.  **Clone the Repository:**
    ```bash
    git clone https://github.com/tatidem/CRUD_API.git
    ```

2.  **Navigate to the Project Directory:**
    ```bash
    cd CRUD_API
    ```

3.  **Configure Environment Variables:**
    ```bash
    cp .env.example .env
    ```
    Edit the `.env` file and set the `PORT` variable to your desired port.

4.  **Install Dependencies:**
    ```bash
    npm install
    ```

## Running the Application

Use the following commands to run the application in different modes:

1.  **Development Mode (with automatic restarts):**
    ```bash
    npm run start:dev
    ```

2.  **Multi-Process Development Mode (for horizontal scaling):**
    ```bash
    npm run start:multi
    ```

3.  **Production Mode (built and optimized):**
    ```bash
    npm run start:prod
    ```

4.  **Multi-Process Production Mode (built, optimized, and horizontally scaled):**
    ```bash
    npm run start:prod:multi
    ```

5.  **Build for Development:**
    ```bash
    npm run build:dev
    ```

6.  **Build for Production:**
    ```bash
    npm run build:prod
    ```

These commands are defined as npm scripts in the `package.json` file.

## Testing

Comprehensive tests are included to ensure the API's functionality.  Tests reside in the `src/tests` directory and use the Jest framework.

Run tests using these npm scripts:

*   **`test`**: Runs all tests.

These scripts provide an easy way to verify the application's stability and reliability.